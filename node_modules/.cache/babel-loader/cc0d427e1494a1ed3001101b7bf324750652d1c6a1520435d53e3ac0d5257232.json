{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import{searchAPI}from'../services/api';import ContentCard from'../components/ContentCard';import Loading from'../components/Loading';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Search=()=>{const[results,setResults]=useState([]);const[loading,setLoading]=useState(false);const[query,setQuery]=useState('');const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const location=useLocation();useEffect(()=>{const searchParams=new URLSearchParams(location.search);const searchQuery=searchParams.get('q');if(searchQuery){setQuery(searchQuery);performSearch(searchQuery,1);}},[location.search]);const performSearch=async function(searchQuery){let searchPage=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(!searchQuery.trim())return;setLoading(true);try{const data=await searchAPI.searchMulti(searchQuery,searchPage);setResults(data.results||[]);setTotalPages(data.total_pages||1);setPage(searchPage);}catch(error){console.error('Error searching:',error);}finally{setLoading(false);}};const handlePageChange=newPage=>{performSearch(query,newPage);window.scrollTo({top:0,behavior:'smooth'});};const getContentType=item=>{if(item.media_type==='movie'||item.title)return'movie';if(item.media_type==='tv'||item.name)return'tv';return'movie';// default\n};return/*#__PURE__*/_jsx(\"div\",{className:\"search-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-section\",style:{paddingTop:'8rem'},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"section-title\",children:query?\"Search Results for \\\"\".concat(query,\"\\\"\"):'Search'}),loading?/*#__PURE__*/_jsx(Loading,{type:\"skeleton\"}):results.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-stats\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Found \",results.length,\" results\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"content-grid\",children:results.map(item=>/*#__PURE__*/_jsx(ContentCard,{item:item,type:getContentType(item)},item.id))}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>handlePageChange(page-1),disabled:page===1,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"page-info\",children:[\"Page \",page,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>handlePageChange(page+1),disabled:page===totalPages,children:\"Next\"})]})]}):query?/*#__PURE__*/_jsxs(\"div\",{className:\"no-results\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"No results found for \\\"\",query,\"\\\"\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Try searching for something else\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"search-placeholder\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Start typing to search\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Search for movies and TV shows\"})]})]})});};export default Search;","map":{"version":3,"names":["React","useState","useEffect","useLocation","searchAPI","ContentCard","Loading","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Search","results","setResults","loading","setLoading","query","setQuery","page","setPage","totalPages","setTotalPages","location","searchParams","URLSearchParams","search","searchQuery","get","performSearch","searchPage","arguments","length","undefined","trim","data","searchMulti","total_pages","error","console","handlePageChange","newPage","window","scrollTo","top","behavior","getContentType","item","media_type","title","name","className","children","style","paddingTop","concat","type","map","id","onClick","disabled"],"sources":["/workspace/src/pages/Search.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { searchAPI } from '../services/api';\nimport ContentCard from '../components/ContentCard';\nimport Loading from '../components/Loading';\n\nconst Search = () => {\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [query, setQuery] = useState('');\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const location = useLocation();\n\n  useEffect(() => {\n    const searchParams = new URLSearchParams(location.search);\n    const searchQuery = searchParams.get('q');\n    \n    if (searchQuery) {\n      setQuery(searchQuery);\n      performSearch(searchQuery, 1);\n    }\n  }, [location.search]);\n\n  const performSearch = async (searchQuery, searchPage = 1) => {\n    if (!searchQuery.trim()) return;\n    \n    setLoading(true);\n    try {\n      const data = await searchAPI.searchMulti(searchQuery, searchPage);\n      setResults(data.results || []);\n      setTotalPages(data.total_pages || 1);\n      setPage(searchPage);\n    } catch (error) {\n      console.error('Error searching:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePageChange = (newPage) => {\n    performSearch(query, newPage);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const getContentType = (item) => {\n    if (item.media_type === 'movie' || item.title) return 'movie';\n    if (item.media_type === 'tv' || item.name) return 'tv';\n    return 'movie'; // default\n  };\n\n  return (\n    <div className=\"search-page\">\n      <div className=\"content-section\" style={{ paddingTop: '8rem' }}>\n        <h1 className=\"section-title\">\n          {query ? `Search Results for \"${query}\"` : 'Search'}\n        </h1>\n        \n        {loading ? (\n          <Loading type=\"skeleton\" />\n        ) : results.length > 0 ? (\n          <>\n            <div className=\"search-stats\">\n              <p>Found {results.length} results</p>\n            </div>\n            \n            <div className=\"content-grid\">\n              {results.map((item) => (\n                <ContentCard \n                  key={item.id} \n                  item={item} \n                  type={getContentType(item)}\n                />\n              ))}\n            </div>\n\n            {/* Pagination */}\n            {totalPages > 1 && (\n              <div className=\"pagination\">\n                <button\n                  className=\"pagination-btn\"\n                  onClick={() => handlePageChange(page - 1)}\n                  disabled={page === 1}\n                >\n                  Previous\n                </button>\n                <span className=\"page-info\">\n                  Page {page} of {totalPages}\n                </span>\n                <button\n                  className=\"pagination-btn\"\n                  onClick={() => handlePageChange(page + 1)}\n                  disabled={page === totalPages}\n                >\n                  Next\n                </button>\n              </div>\n            )}\n          </>\n        ) : query ? (\n          <div className=\"no-results\">\n            <h3>No results found for \"{query}\"</h3>\n            <p>Try searching for something else</p>\n          </div>\n        ) : (\n          <div className=\"search-placeholder\">\n            <h3>Start typing to search</h3>\n            <p>Search for movies and TV shows</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Search;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}